<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3423.3333px" preserveAspectRatio="none" style="width:4068px;height:3423px;" version="1.1" viewBox="0 0 4068 3423" width="4068.3333px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="338.3333" x="1875.4167" y="43.7332">同步主流程（v2 优先 / v1 回退）</text><rect fill="#FFFFFF" height="2741.3987" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3932.5" x="135" y="393.3598"/><rect fill="#FFFFFF" height="2619.0654" style="stroke: none; stroke-width: 1.6666666666666667;" width="3932.5" x="135" y="515.693"/><rect fill="#FFFFFF" height="2511.1456" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3899.1667" x="151.6667" y="611.9462"/><rect fill="#FFFFFF" height="2388.8124" style="stroke: none; stroke-width: 1.6666666666666667;" width="3899.1667" x="151.6667" y="734.2794"/><rect fill="#FFFFFF" height="2226.1859" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3865.8333" x="168.3333" y="885.2392"/><rect fill="#FFFFFF" height="2049.146" style="stroke: none; stroke-width: 1.6666666666666667;" width="3865.8333" x="168.3333" y="1062.2792"/><rect fill="#FFFFFF" height="1941.2261" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3832.5" x="185" y="1158.5323"/><rect fill="#FFFFFF" height="1764.1862" style="stroke: none; stroke-width: 1.6666666666666667;" width="3832.5" x="185" y="1335.5722"/><rect fill="#FFFFFF" height="236.6264" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="2156.6667" x="810" y="1431.8254"/><rect fill="#FFFFFF" height="122.3332" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="1816.6667" x="826.6667" y="1534.4519"/><rect fill="#FFFFFF" height="372.5334" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3174.1667" x="826.6667" y="2132.1854"/><rect fill="#FFFFFF" height="395.9196" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="2156.6667" x="810" y="2528.0521"/><rect fill="#FFFFFF" height="112.6265" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="613.3333" x="826.6667" y="2662.052"/><rect fill="#FFFFFF" height="137.6265" style="stroke: none; stroke-width: 1.6666666666666667;" width="2156.6667" x="810" y="2786.3452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="53.3333" x2="53.3333" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="391.6667" x2="391.6667" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="920" x2="920" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="1430.8333" x2="1430.8333" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="1694.1667" x2="1694.1667" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="1979.1667" x2="1979.1667" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="2271.6667" x2="2271.6667" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="2493.3333" x2="2493.3333" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="2796.6667" x2="2796.6667" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="3055" x2="3055" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="3525" x2="3525" y1="200.9064" y2="3290.5452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 5.0,5.0;" x1="3875.8333" x2="3875.8333" y1="200.9064" y2="3290.5452"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="70" x="13.3333" y="194.1864">触发方</text><ellipse cx="53.3333" cy="78.7865" fill="#FEFECE" rx="13.3333" ry="13.3333" style="stroke: #A80036; stroke-width: 3.3333333333333335;"/><path d="M53.3333,92.1199 L53.3333,137.1199 M31.6667,105.4532 L75,105.4532 M53.3333,137.1199 L31.6667,162.1199 M53.3333,137.1199 L75,162.1199 " fill="#FEFECE" style="stroke: #A80036; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="70" x="13.3333" y="3315.9451">触发方</text><ellipse cx="53.3333" cy="3339.3317" fill="#FEFECE" rx="13.3333" ry="13.3333" style="stroke: #A80036; stroke-width: 3.3333333333333335;"/><path d="M53.3333,3352.6651 L53.3333,3397.6651 M31.6667,3365.9984 L75,3365.9984 M53.3333,3397.6651 L31.6667,3422.6651 M53.3333,3397.6651 L75,3422.6651 " fill="#FEFECE" style="stroke: #A80036; stroke-width: 3.3333333333333335;"/><rect fill="#FEFECE" height="90.9064" style="stroke: #A80036; stroke-width: 2.5;" width="380" x="201.6667" y="108.3333"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="23.3333" x="380" y="147.0665">UI</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="356.6667" x="213.3333" y="180.8531">（StartupWrapper / 同步设置页）</text><rect fill="#FEFECE" height="90.9064" style="stroke: #A80036; stroke-width: 2.5;" width="380" x="201.6667" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="23.3333" x="380" y="3327.6118">UI</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="356.6667" x="213.3333" y="3361.3983">（StartupWrapper / 同步设置页）</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="153.3333" x="843.3333" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="130" x="855" y="180.8531">SyncService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="153.3333" x="843.3333" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="130" x="855" y="3327.6118">SyncService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="225" x="1319.1667" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="201.6667" x="1330.8333" y="180.8531">SyncConfigService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="225" x="1319.1667" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="201.6667" x="1330.8333" y="3327.6118">SyncConfigService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="268.3333" x="1560.8333" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="245" x="1572.5" y="180.8531">SyncLocalStateService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="268.3333" x="1560.8333" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="245" x="1572.5" y="3327.6118">SyncLocalStateService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="268.3333" x="1845.8333" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="245" x="1857.5" y="180.8531">SyncNetworkPrecheck</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="268.3333" x="1845.8333" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="245" x="1857.5" y="3327.6118">SyncNetworkPrecheck</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="143.3333" x="2200" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="120" x="2211.6667" y="180.8531">WifiService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="143.3333" x="2200" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="120" x="2211.6667" y="3327.6118">WifiService</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="266.6667" x="2360" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="243.3333" x="2371.6667" y="180.8531">ToolSnapshotExporter</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="266.6667" x="2360" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="243.3333" x="2371.6667" y="3327.6118">ToolSnapshotExporter</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="306.6667" x="2643.3333" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="283.3333" x="2655" y="180.8531">ToolSyncProvider（多个）</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="306.6667" x="2643.3333" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="283.3333" x="2655" y="3327.6118">ToolSyncProvider（多个）</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="176.6667" x="2966.6667" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="153.3333" x="2978.3333" y="180.8531">SyncApiClient</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="176.6667" x="2966.6667" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="153.3333" x="2978.3333" y="3327.6118">SyncApiClient</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="283.3333" x="3383.3333" y="142.1199"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="260" x="3395" y="180.8531">sync_server（FastAPI）</text><rect fill="#FEFECE" height="57.1199" style="stroke: #A80036; stroke-width: 2.5;" width="283.3333" x="3383.3333" y="3288.8785"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="260" x="3395" y="3327.6118">sync_server（FastAPI）</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="205" x="3769.1667" y="194.1864">sync.db（SQLite）</text><path d="M3846.6667,107.1199 C3846.6667,90.4532 3876.6667,90.4532 3876.6667,90.4532 C3876.6667,90.4532 3906.6667,90.4532 3906.6667,107.1199 L3906.6667,150.4532 C3906.6667,167.1199 3876.6667,167.1199 3876.6667,167.1199 C3876.6667,167.1199 3846.6667,167.1199 3846.6667,150.4532 L3846.6667,107.1199 " fill="#FEFECE" style="stroke: #000000; stroke-width: 2.5;"/><path d="M3846.6667,107.1199 C3846.6667,123.7865 3876.6667,123.7865 3876.6667,123.7865 C3876.6667,123.7865 3906.6667,123.7865 3906.6667,107.1199 " fill="none" style="stroke: #000000; stroke-width: 2.5;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="23.3333" lengthAdjust="spacingAndGlyphs" textLength="205" x="3769.1667" y="3315.9451">sync.db（SQLite）</text><path d="M3846.6667,3339.3317 C3846.6667,3322.6651 3876.6667,3322.6651 3876.6667,3322.6651 C3876.6667,3322.6651 3906.6667,3322.6651 3906.6667,3339.3317 L3906.6667,3382.6651 C3906.6667,3399.3317 3876.6667,3399.3317 3876.6667,3399.3317 C3876.6667,3399.3317 3846.6667,3399.3317 3846.6667,3382.6651 L3846.6667,3339.3317 " fill="#FEFECE" style="stroke: #000000; stroke-width: 2.5;"/><path d="M3846.6667,3339.3317 C3846.6667,3355.9984 3876.6667,3355.9984 3876.6667,3355.9984 C3876.6667,3355.9984 3906.6667,3355.9984 3906.6667,3339.3317 " fill="none" style="stroke: #000000; stroke-width: 2.5;"/><polygon fill="#A80036" points="371.6667,250.9064,388.3333,257.573,371.6667,264.2397,378.3333,257.573" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="53.3333" x2="381.6667" y1="257.573" y2="257.573"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="65" y="249.3731">1</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="278.3333" x="85" y="249.3731">点击“同步” / 启动自动同步</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="916.6667" x2="900" y1="312.2797" y2="305.6131"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="916.6667" x2="900" y1="312.2797" y2="318.9464"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="391.6667" x2="918.3333" y1="312.2797" y2="312.2797"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="403.3333" y="304.0798">2</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="288.3333" x="423.3333" y="304.0798">sync(trigger, forceDecision?)</text><polygon fill="#A80036" points="1411.6667,360.3198,1428.3333,366.9864,1411.6667,373.6531,1418.3333,366.9864" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="1421.6667" y1="366.9864" y2="366.9864"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="931.6667" y="358.7864">3</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="111.6667" x="951.6667" y="358.7864">读取 config</text><rect fill="none" height="2741.3987" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3932.5" x="135" y="393.3598"/><polygon fill="#EEEEEE" points="135,393.3598,238.3333,393.3598,238.3333,410.0265,221.6667,426.6931,135,426.6931,135,393.3598" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="160" y="420.1598">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148.3333" x="263.3333" y="417.9596">[配置缺失/不合法]</text><polygon fill="#A80036" points="410,494.613,393.3333,501.2796,410,507.9463,403.3333,501.2796" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="400" x2="918.3333" y1="501.2796" y2="501.2796"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="420" y="477.0997">4</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="115" x="440" y="461.413">return false</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="381.6667" x="440" y="492.7863">lastError=“同步配置未设置或不完整”</text><line style="stroke: #000000; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="135" x2="4067.5" y1="517.3597" y2="517.3597"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86.6667" x="143.3333" y="538.6262">[配置合法]</text><polygon fill="#A80036" points="1675,578.9061,1691.6667,585.5728,1675,592.2395,1681.6667,585.5728" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="1685" y1="585.5728" y2="585.5728"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="931.6667" y="577.3728">5</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="163.3333" x="951.6667" y="577.3728">读取 localUserId</text><rect fill="none" height="2511.1456" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3899.1667" x="151.6667" y="611.9462"/><polygon fill="#EEEEEE" points="151.6667,611.9462,255,611.9462,255,628.6128,238.3333,645.2795,151.6667,645.2795,151.6667,611.9462" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="176.6667" y="638.7462">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="521.6667" x="280" y="636.546">[localUserId 与 serverUserId 不一致 且未指定 forceDecision]</text><polygon fill="#A80036" points="410,713.1993,393.3333,719.866,410,726.5327,403.3333,719.866" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="400" x2="918.3333" y1="719.866" y2="719.866"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="420" y="695.686">6</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="115" x="440" y="679.9994">return false</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="468.3333" x="440" y="711.3727">lastError=“用户不匹配，需手动选择覆盖方向”</text><line style="stroke: #000000; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="151.6667" x2="4050.8333" y1="735.9461" y2="735.9461"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="160" y="757.2126">[用户一致或已强制]</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1976.6667" x2="1960" y1="804.1592" y2="797.4925"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1976.6667" x2="1960" y1="804.1592" y2="810.8259"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="1978.3333" y1="804.1592" y2="804.1592"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="931.6667" y="795.9592">7</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="260" x="951.6667" y="795.9592">check(config, wifiService)</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2268.3333" x2="2251.6667" y1="858.8659" y2="852.1992"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2268.3333" x2="2251.6667" y1="858.8659" y2="865.5326"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1980" x2="2270" y1="858.8659" y2="858.8659"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="1991.6667" y="850.6659">8</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="195" x="2011.6667" y="850.6659">getNetworkStatus()</text><rect fill="none" height="2226.1859" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3865.8333" x="168.3333" y="885.2392"/><polygon fill="#EEEEEE" points="168.3333,885.2392,271.6667,885.2392,271.6667,901.9059,255,918.5726,168.3333,918.5726,168.3333,885.2392" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="193.3333" y="912.0393">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183.3333" x="296.6667" y="909.8391">[私网模式 &amp;&amp; 非 WiFi]</text><polygon fill="#A80036" points="938.3333,986.4924,921.6667,993.1591,938.3333,999.8257,931.6667,993.1591" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="928.3333" x2="1978.3333" y1="993.1591" y2="993.1591"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.3333" x="948.3333" y="968.9791">9</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="50" x="968.3333" y="953.2924">error</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="195" x="968.3333" y="984.6658">（静默跳过或提示）</text><polygon fill="#A80036" points="410,1040.9058,393.3333,1047.5725,410,1054.2391,403.3333,1047.5725" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="400" x2="918.3333" y1="1047.5725" y2="1047.5725"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="420" y="1039.3725">10</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="115" x="453.3333" y="1039.3725">return false</text><line style="stroke: #000000; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="168.3333" x2="4034.1667" y1="1063.9458" y2="1063.9458"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86.6667" x="176.6667" y="1085.2123">[网络满足]</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2268.3333" x2="2251.6667" y1="1132.159" y2="1125.4923"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2268.3333" x2="2251.6667" y1="1132.159" y2="1138.8256"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1980" x2="2270" y1="1132.159" y2="1132.159"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="1991.6667" y="1123.959">11</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="218.3333" x="2025" y="1123.959">getCurrentWifiName()</text><rect fill="none" height="1941.2261" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3832.5" x="185" y="1158.5323"/><polygon fill="#EEEEEE" points="185,1158.5323,288.3333,1158.5323,288.3333,1175.199,271.6667,1191.8657,185,1191.8657,185,1158.5323" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="210" y="1185.3323">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="215" x="313.3333" y="1183.1322">[SSID 不可得/不在白名单]</text><polygon fill="#A80036" points="938.3333,1259.7855,921.6667,1266.4522,938.3333,1273.1188,931.6667,1266.4522" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="928.3333" x2="1978.3333" y1="1266.4522" y2="1266.4522"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="948.3333" y="1242.2722">12</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="50" x="981.6667" y="1226.5855">error</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="216.6667" x="981.6667" y="1257.9589">（可直接展示给用户）</text><polygon fill="#A80036" points="410,1314.1989,393.3333,1320.8655,410,1327.5322,403.3333,1320.8655" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="400" x2="918.3333" y1="1320.8655" y2="1320.8655"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="420" y="1312.6656">13</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="115" x="453.3333" y="1312.6656">return false</text><line style="stroke: #000000; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="185" x2="4017.5" y1="1337.2389" y2="1337.2389"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86.6667" x="193.3333" y="1358.5054">[预检通过]</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2490" x2="2473.3333" y1="1405.452" y2="1398.7854"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2490" x2="2473.3333" y1="1405.452" y2="1412.1187"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="2491.6667" y1="1405.452" y2="1405.452"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="1397.2521">14</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="201.6667" x="965" y="1397.2521">exportAll(providers)</text><rect fill="none" height="236.6264" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="2156.6667" x="810" y="1431.8254"/><polygon fill="#EEEEEE" points="810,1431.8254,931.6667,1431.8254,931.6667,1448.4921,915,1465.1587,810,1465.1587,810,1431.8254" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46.6667" x="835" y="1458.6254">loop</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="215" x="956.6667" y="1456.4252">[每个 ToolSyncProvider]</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2793.3333" x2="2776.6667" y1="1508.0786" y2="1501.4119"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2793.3333" x2="2776.6667" y1="1508.0786" y2="1514.7452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2493.3333" x2="2795" y1="1508.0786" y2="1508.0786"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="2505" y="1499.8786">15</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="125" x="2538.3333" y="1499.8786">exportData()</text><rect fill="none" height="122.3332" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="1816.6667" x="826.6667" y="1534.4519"/><polygon fill="#EEEEEE" points="826.6667,1534.4519,930,1534.4519,930,1551.1186,913.3333,1567.7853,826.6667,1567.7853,826.6667,1534.4519" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="851.6667" y="1561.2519">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="955" y="1559.0518">[导出失败/缺少 data 字段]</text><polygon fill="#A80036" points="938.3333,1635.7051,921.6667,1642.3717,938.3333,1649.0384,931.6667,1642.3717" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="928.3333" x2="2491.6667" y1="1642.3717" y2="1642.3717"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="948.3333" y="1618.1918">16</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="166.6667" x="981.6667" y="1602.5051">throw Exception</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="173.3333" x="981.6667" y="1633.8785">（取消本次同步）</text><polygon fill="#FBFB77" points="2501.6667,1688.4518,2501.6667,1798.4518,3035,1798.4518,3035,1705.1185,3018.3333,1688.4518,2501.6667,1688.4518" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3018.3333" x2="3018.3333" y1="1688.4518" y2="1705.1185"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3035" x2="3018.3333" y1="1705.1185" y2="1705.1185"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="130" x="2511.6667" y="1721.9185">性能瓶颈点：</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="498.3333" x="2511.6667" y="1753.2919">- 全量快照导出：CPU/IO\n（工具数据量大时明显）</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="396.6667" x="2511.6667" y="1784.6652">- 建议：必要时评估 per-tool 元信息/增量</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3051.6667" x2="3035" y1="1879.2386" y2="1872.5719"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3051.6667" x2="3035" y1="1879.2386" y2="1885.9052"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="3053.3333" y1="1879.2386" y2="1879.2386"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="1855.0586">17</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="235" x="965" y="1839.3719">syncV2(config, request)</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="280" x="965" y="1870.7453">（/sync/v2, timeout=120s）</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3521.6667" x2="3505" y1="1933.6519" y2="1926.9853"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3521.6667" x2="3505" y1="1933.6519" y2="1940.3186"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3055" x2="3523.3333" y1="1933.6519" y2="1933.6519"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="3066.6667" y="1925.452">18</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="148.3333" x="3100" y="1925.452">POST /sync/v2</text><polygon fill="#A80036" points="3856.6667,2013.3586,3873.3333,2020.0253,3856.6667,2026.692,3863.3333,2020.0253" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3525" x2="3866.6667" y1="2020.0253" y2="2020.0253"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="3536.6667" y="1995.8453">19</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="181.6667" x="3570" y="1980.1587">读取/保存用户快照</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="278.3333" x="3570" y="2011.532">revision 自增（use_client）</text><polygon fill="#A80036" points="3073.3333,2099.4387,3056.6667,2106.1054,3073.3333,2112.772,3066.6667,2106.1054" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="3063.3333" x2="3523.3333" y1="2106.1054" y2="2106.1054"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="3083.3333" y="2081.9254">20</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="170" x="3116.6667" y="2066.2387">SyncResponseV2</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="396.6667" x="3116.6667" y="2097.6121">(decision, tools_data?, server_revision)</text><rect fill="none" height="372.5334" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="3174.1667" x="826.6667" y="2132.1854"/><polygon fill="#EEEEEE" points="826.6667,2132.1854,930,2132.1854,930,2148.8521,913.3333,2165.5187,826.6667,2165.5187,826.6667,2132.1854" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="851.6667" y="2158.9854">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="251.6667" x="955" y="2156.7853">[服务端不支持 v2（404/405）]</text><polygon fill="#A80036" points="938.3333,2201.7719,921.6667,2208.4386,938.3333,2215.1052,931.6667,2208.4386" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="928.3333" x2="3053.3333" y1="2208.4386" y2="2208.4386"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="948.3333" y="2200.2386">21</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="303.3333" x="981.6667" y="2200.2386">抛 SyncApiException(404/405)</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3051.6667" x2="3035" y1="2294.8119" y2="2288.1453"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3051.6667" x2="3035" y1="2294.8119" y2="2301.4786"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="3053.3333" y1="2294.8119" y2="2294.8119"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="2270.632">22</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="211.6667" x="965" y="2254.9453">sync(config, request)</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="146.6667" x="965" y="2286.3187">（回退 /sync）</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3521.6667" x2="3505" y1="2349.2253" y2="2342.5587"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3521.6667" x2="3505" y1="2349.2253" y2="2355.892"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3055" x2="3523.3333" y1="2349.2253" y2="2349.2253"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="3066.6667" y="2341.0253">23</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="116.6667" x="3100" y="2341.0253">POST /sync</text><polygon fill="#A80036" points="3856.6667,2397.2654,3873.3333,2403.932,3856.6667,2410.5987,3863.3333,2403.932" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="3525" x2="3866.6667" y1="2403.932" y2="2403.932"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="3536.6667" y="2395.732">24</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="138.3333" x="3570" y="2395.732">读取/保存快照</text><polygon fill="#A80036" points="3073.3333,2483.6387,3056.6667,2490.3054,3073.3333,2496.972,3066.6667,2490.3054" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="3063.3333" x2="3523.3333" y1="2490.3054" y2="2490.3054"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="3083.3333" y="2466.1254">25</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="170" x="3116.6667" y="2450.4387">SyncResponseV1</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="131.6667" x="3116.6667" y="2481.8121">(tools_data?)</text><rect fill="none" height="395.9196" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="2156.6667" x="810" y="2528.0521"/><polygon fill="#EEEEEE" points="810,2528.0521,913.3333,2528.0521,913.3333,2544.7188,896.6667,2561.3854,810,2561.3854,810,2528.0521" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="835" y="2554.8521">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="348.3333" x="938.3333" y="2552.6519">[decision = use_server（需要覆盖导入）]</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2793.3333" x2="2776.6667" y1="2635.9719" y2="2629.3053"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="2793.3333" x2="2776.6667" y1="2635.9719" y2="2642.6386"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="2795" y1="2635.9719" y2="2635.9719"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="2611.792">26</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="223.3333" x="965" y="2596.1053">importData(snapshot)</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="223.3333" x="965" y="2627.4787">（tag_manager 优先）</text><rect fill="none" height="112.6265" style="stroke: #000000; stroke-width: 3.3333333333333335;" width="613.3333" x="826.6667" y="2662.052"/><polygon fill="#EEEEEE" points="826.6667,2662.052,930,2662.052,930,2678.7187,913.3333,2695.3853,826.6667,2695.3853,826.6667,2662.052" style="stroke: #000000; stroke-width: 3.3333333333333335;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28.3333" x="851.6667" y="2688.852">alt</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141.6667" x="955" y="2686.6518">[某工具导入失败]</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="990" y1="2739.6785" y2="2739.6785"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="990" x2="990" y1="2739.6785" y2="2761.3452"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="921.6667" x2="990" y1="2761.3452" y2="2761.3452"/><polygon fill="#A80036" points="938.3333,2754.6785,921.6667,2761.3452,938.3333,2768.0118,931.6667,2761.3452" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="2730.1052">27</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="455" x="965" y="2730.1052">devLog + lastError=“部分工具数据导入失败”</text><line style="stroke: #000000; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="810" x2="2966.6667" y1="2788.0118" y2="2788.0118"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="18.3333" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="260" x="818.3333" y="2809.2784">[decision = use_client / noop]</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="990" y1="2888.9717" y2="2888.9717"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="990" x2="990" y1="2888.9717" y2="2910.6384"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="921.6667" x2="990" y1="2910.6384" y2="2910.6384"/><polygon fill="#A80036" points="938.3333,2903.9717,921.6667,2910.6384,938.3333,2917.305,931.6667,2910.6384" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="2863.7117">28</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="178.3333" x="965" y="2848.025">不导入 tools_data</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="203.3333" x="965" y="2879.3984">（仅更新游标/时间）</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1428.3333" x2="1411.6667" y1="2975.6384" y2="2968.9717"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1428.3333" x2="1411.6667" y1="2975.6384" y2="2982.305"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="1430" y1="2975.6384" y2="2975.6384"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="2967.4384">29</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="436.6667" x="965" y="2967.4384">updateLastSyncState(time, serverRevision)</text><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1691.6667" x2="1675" y1="3030.3451" y2="3023.6784"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1691.6667" x2="1675" y1="3030.3451" y2="3037.0117"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="920" x2="1693.3333" y1="3030.3451" y2="3030.3451"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="931.6667" y="3022.1451">30</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="296.6667" x="965" y="3022.1451">setLocalUserId(config.userId)</text><polygon fill="#A80036" points="410,3078.3851,393.3333,3085.0518,410,3091.7184,403.3333,3085.0518" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667; stroke-dasharray: 2.0,2.0;" x1="400" x2="918.3333" y1="3085.0518" y2="3085.0518"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26.6667" x="420" y="3076.8518">31</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="110" x="453.3333" y="3076.8518">return true</text><polygon fill="#FBFB77" points="628.3333,3154.7585,628.3333,3264.7585,1211.6667,3264.7585,1211.6667,3171.4251,1195,3154.7585,628.3333,3154.7585" style="stroke: #A80036; stroke-width: 1.6666666666666667;"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1195" x2="1195" y1="3154.7585" y2="3171.4251"/><line style="stroke: #A80036; stroke-width: 1.6666666666666667;" x1="1211.6667" x2="1195" y1="3171.4251" y2="3171.4251"/><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="151.6667" x="638.3333" y="3188.2251">异常处理节点：</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="548.3333" x="638.3333" y="3219.5985">- SyncApiException：会转为更友好文案（TLS/地址等）</text><text fill="#000000" font-family="Noto Sans CJK SC" font-size="21.6667" lengthAdjust="spacingAndGlyphs" textLength="546.6667" x="638.3333" y="3250.9719">- importData 异常：记录后继续其它工具，避免全盘失败</text></g></svg>